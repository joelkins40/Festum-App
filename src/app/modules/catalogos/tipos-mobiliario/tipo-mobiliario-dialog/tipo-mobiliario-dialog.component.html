<!-- 📝 Modal para Crear/Editar Tipos de Mobiliario -->
<div class="tipo-mobiliario-dialog">

  <!-- Header del Modal -->
  <div class="dialog-header">
    <div class="header-content">
      <mat-icon class="header-icon">{{ modo === 'crear' ? 'add_box' : 'edit' }}</mat-icon>
      <h2 class="header-title">{{ modo === 'crear' ? 'Nuevo Tipo de Mobiliario' : 'Editar Tipo de Mobiliario' }}</h2>
    </div>
    <button mat-icon-button (click)="cancelar()" class="close-button" matTooltip="Cerrar">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Contenido del Modal -->
  <div class="dialog-content">
    <form [formGroup]="tipoMobiliarioForm" class="tipo-mobiliario-form">

      <!-- Campo Descripción -->
      <div class="form-section">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Descripción del tipo de mobiliario</mat-label>
          <input matInput formControlName="descripcion" placeholder="Ej: Mesa Redonda, Silla Chiavari, Sofá Lounge..."
            maxlength="100" #descripcionInput>
          <mat-icon matPrefix class="input-icon">chair</mat-icon>

          <!-- Mensajes de Error -->
          <mat-error *ngIf="descripcion?.hasError('required')">
            La descripción es requerida
          </mat-error>
          <mat-error *ngIf="descripcion?.hasError('minlength')">
            La descripción debe tener al menos 2 caracteres
          </mat-error>
          <mat-error *ngIf="descripcion?.hasError('maxlength')">
            La descripción no puede exceder 100 caracteres
          </mat-error>
          <mat-error *ngIf="descripcion?.hasError('pattern')">
            Solo se permiten letras, números, espacios y caracteres especiales básicos
          </mat-error>

          <!-- Contador de caracteres -->
          <mat-hint align="end">
            {{ descripcionInput.value.length || 0 }}/100
          </mat-hint>
        </mat-form-field>
      </div>

      <!-- Información adicional para edición -->
      <div class="info-section" *ngIf="modo === 'editar' && data.tipoMobiliario">
        <div class="info-card">
          <h4 class="info-title">
            <mat-icon>info</mat-icon>
            Información del Registro
          </h4>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Fecha de creación:</span>
              <span class="info-value">{{ data.tipoMobiliario?.fechaCreacion | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <div class="info-item">
              <span class="info-label">ID:</span>
              <span class="info-value">#{{ data.tipoMobiliario?.id }}</span>
            </div>
          </div>
        </div>
      </div>

    </form>
  </div>

  <!-- Footer con botones de acción -->
  <div class="dialog-footer">
    <div class="button-group">
      <button mat-button (click)="cancelar()" class="cancel-button" [disabled]="guardando">
        <mat-icon>cancel</mat-icon>
        Cancelar
      </button>

      <button mat-raised-button color="primary" (click)="guardar()" class="save-button"
        [disabled]="!esFormularioValido || guardando">
        <mat-icon>{{ guardando ? 'hourglass_empty' : (modo === 'crear' ? 'save' : 'update') }}</mat-icon>
        {{ guardando ? 'Guardando...' : (modo === 'crear' ? 'Crear Tipo de Mobiliario' : 'Actualizar Tipo de
        Mobiliario') }}
      </button>
    </div>
  </div>

</div>
