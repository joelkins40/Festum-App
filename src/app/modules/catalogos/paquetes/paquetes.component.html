<div class="paquetes-container">

	<div class="page-header">
		<div class="header-content">
			<div class="page-title">
				<mat-icon class="page-icon">inventory_2</mat-icon>
				<h1>Gestión de Paquetes</h1>
			</div>
			<p class="page-description">Visualiza los paquetes y servicios disponibles en el catálogo</p>
		</div>

		<div class="header-actions">
			<button mat-raised-button color="primary" class="create-button" disabled>
				<mat-icon>add_circle</mat-icon>
				Nuevo Paquete
			</button>
		</div>
	</div>

	<div class="loading-overlay" *ngIf="loading">
		<div class="loading-content">
			<mat-progress-spinner diameter="60" mode="indeterminate" color="primary"></mat-progress-spinner>
			<p>Cargando paquetes...</p>
		</div>
	</div>

	<mat-card class="main-card">
		<div class="table-toolbar">
			<div class="search-container">
				<mat-form-field appearance="outline" class="search-field">
					<mat-label>Buscar paquetes</mat-label>
					<input matInput placeholder="Buscar por nombre o categoría...">
					<mat-icon matSuffix>search</mat-icon>
				</mat-form-field>
			</div>

			<div class="action-buttons">
				<button mat-icon-button (click)="cargarPaquetes()" matTooltip="Refrescar">
					<mat-icon>refresh</mat-icon>
				</button>
			</div>
		</div>

		<mat-divider class="toolbar-divider"></mat-divider>

		<div class="table-container">
			<table mat-table [dataSource]="dataSource" matSort class="paquetes-table">

				<!-- ID -->
				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef>ID</th>
					<td mat-cell *matCellDef="let p">{{ p.id }}</td>
				</ng-container>

				<!-- Tipo -->
				<ng-container matColumnDef="tipo">
					<th mat-header-cell *matHeaderCellDef>Tipo</th>
					<td mat-cell *matCellDef="let p">{{ p.tipo }}</td>
				</ng-container>

				<!-- Nombre -->
				<ng-container matColumnDef="nombre">
					<th mat-header-cell *matHeaderCellDef>Nombre</th>
					<td mat-cell *matCellDef="let p">
						<div class="paquete-info">
							<img *ngIf="p.imagen" [src]="p.imagen" alt="{{p.nombre}}" class="thumb">
							<div>
								<div class="paquete-nombre">{{ p.nombre }}</div>
								<div class="paquete-desc">{{ p.descripcionCorta }}</div>
							</div>
						</div>
					</td>
				</ng-container>

				<!-- Categoria -->
				<ng-container matColumnDef="categoria">
					<th mat-header-cell *matHeaderCellDef>Categoria</th>
					<td mat-cell *matCellDef="let p">{{ p.categoria }}</td>
				</ng-container>

				<!-- Stock -->
				<ng-container matColumnDef="stock">
					<th mat-header-cell *matHeaderCellDef>Disponibilidad</th>
					<td mat-cell *matCellDef="let p">{{ p.disponibilidad }}</td>
				</ng-container>

				<!-- Precio -->
				<ng-container matColumnDef="precio">
					<th mat-header-cell *matHeaderCellDef>Precio</th>
					<td mat-cell *matCellDef="let p">{{ p.precioTotal | currency:'MXN' }}</td>
				</ng-container>

				<!-- Acciones -->
				<ng-container matColumnDef="acciones">
					<th mat-header-cell *matHeaderCellDef>Acciones</th>
					<td mat-cell *matCellDef="let p">
						<div class="acciones-container">
							<button mat-icon-button (click)="verPaquete(p)" matTooltip="Ver paquete">
								<mat-icon>visibility</mat-icon>
							</button>
						</div>
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="columnasDisplayed"></tr>
				<tr mat-row *matRowDef="let row; columns: columnasDisplayed;"></tr>

				<tr class="mat-row no-data-row" *matNoDataRow>
					<td class="mat-cell no-data-cell" [attr.colspan]="columnasDisplayed.length">
						<div class="no-data-message">
							<mat-icon class="no-data-icon">inbox</mat-icon>
							<span class="no-data-text">No se encontraron paquetes</span>
						</div>
					</td>
				</tr>
			</table>

			<div *ngIf="loading" class="table-loading-overlay">
				<mat-progress-spinner color="primary" mode="indeterminate" diameter="60"></mat-progress-spinner>
				<p class="loading-text">Cargando paquetes...</p>
			</div>
		</div>

		<mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="10" showFirstLastButtons class="table-paginator"></mat-paginator>
	</mat-card>
</div>
